{% extends 'base.html' %}

{% block content %}
<div class="row mt-4">

    <div class="col-md-5 mb-4">
        <div class="card shadow-sm border-0">
            {% if produk.gambar_produk %}
                <img src="{{ produk.gambar_produk.url }}" class="card-img-top rounded" alt="{{ produk.nama_produk }}">
            {% else %}
                <div class="bg-secondary text-white d-flex align-items-center justify-content-center" style="height: 300px;">
                    <span>Tidak ada gambar</span>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="col-md-7">
        <h2 class="fw-bold">{{ produk.nama_produk }}</h2>
        <h4 class="text-danger fw-bold my-3">Rp {{ produk.harga }}</h4>

        <div class="badge bg-info text-dark mb-3">
            {{ produk.kategori.nama_kategori }}
        </div>
        <div class="badge bg-warning text-dark mb-3">
            {{ produk.umkm.nama_umkm }}
        </div>

        <p class="text-muted">{{ produk.deskripsi }}</p>

        <hr>

        <div class="card bg-light border-0 p-3">
            <h5 class="fw-bold">Beri Penilaian</h5>
            <p class="small text-muted">
                Penilaian Anda membantu kami merekomendasikan produk yang lebih baik.
            </p>

            <form method="POST">
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label fw-bold">Rating</label>
                    <select name="rating" class="form-select w-50" required>
                        <option value="" disabled selected>-- Pilih Bintang --</option>
                        <option value="5" {% if penilaian_user.rating == 5 %}selected{% endif %}>5 - Sangat Bagus</option>
                        <option value="4" {% if penilaian_user.rating == 4 %}selected{% endif %}>4 - Bagus</option>
                        <option value="3" {% if penilaian_user.rating == 3 %}selected{% endif %}>3 - Biasa</option>
                        <option value="2" {% if penilaian_user.rating == 2 %}selected{% endif %}>2 - Kurang</option>
                        <option value="1" {% if penilaian_user.rating == 1 %}selected{% endif %}>1 - Buruk</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold">Ulasan (Opsional)</label>
                    <textarea name="ulasan" class="form-control" rows="2">{{ penilaian_user.ulasan|default:'' }}</textarea>
                </div>

                <button type="submit" class="btn btn-primary">
                    Kirim Penilaian
                </button>
            </form>

        </div>
    </div>
</div>
{% endblock %}
